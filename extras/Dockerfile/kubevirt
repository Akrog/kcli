FROM registry.centos.org/centos/centos7-atomic:latest
MAINTAINER Karim Boumedhel <karimboumedhel@gmail.com>

LABEL name="karmab/kcli" \
      maintainer="karimboumedhel@gmail.com" \
      vendor="Karmalabs" \
      version="10.6" \
      release="1" \
      summary="Libvirt/VirtualBox wrapper on steroids" \
      description="Libvirt/VirtualBox wrapper on steroids"

EXPOSE 9000

# Group the package installation
RUN microdnf install --nodocs epel-release && \
    microdnf install --nodocs git nmap-ncat python-pip openssh-clients && \
    microdnf clean all

# Group the pip installation
RUN pip install -U --no-cache-dir ipaddress
RUN pip install --no-cache-dir -e git+https://github.com/karmab/kcli.git#egg=kcli[kubevirt]

VOLUME ["/var/run/libvirt", "/root/.ssh", "/root"]

ENTRYPOINT ["/usr/bin/kcli"]
CMD ["-h"]
